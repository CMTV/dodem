"use strict";$(document).ready(function(){var n="normal",i="success",a="wtf",o="error",r={$searchContainer:null,$successPane:null,state:n,pState:n,init:function(){this.$searchContainer=$(".search-container"),this.$successPane=$(".search-results-pane--success")},setState:function(t,e){var s=!(1<arguments.length&&void 0!==e)||e;this.pState=this.state,this.state=t,this.$searchContainer.removeClass(this.getStateClass(n)+" "+this.getStateClass(i)+" "+this.getStateClass(a)+" "+this.getStateClass(o)),this.$searchContainer.addClass(this.getStateClass(t)),this.$successPane.toggleClass("_loading",s),this.stateChange()},stateChange:function(){this.state!=i&&(e._enterPressed=!1,e.setupButtons(""))},getStateClass:function(t){return"state--"+t}},e={$navSection:null,$navParagraph:null,$taskPreview:null,$goButtons:null,ajax:null,_enterPressed:!1,init:function(){this.$navSection=$(".search-results .task-nav .section"),this.$navParagraph=$(".search-results .task-nav .paragraph"),this.$taskPreview=$(".task-preview"),this.$goButtons=$(".goto-solution-button")},loadTask:function(t){var s=this;this.solutionExists(t)?(r.setState(i),this.setupButtons("".concat(SITE_ROOT,"tasks/").concat(t,"/")),this._enterPressed&&this.enterPress(),this.ajax=$.getJSON("".concat(SITE_ROOT,"tasks/").concat(t,"/preview.json"),function(t){s.$taskPreview.empty();var e=get_location(t.location);s.setLocationItem(s.$navSection,e.section),s.setLocationItem(s.$navParagraph,e.paragraph,!0),s.$taskPreview.append(t.taskHtml),MathJax.typesetPromise().then(function(){r.setState(i,!1)})})):r.setState(o)},abort:function(){this.ajax&&this.ajax.abort()},solutionExists:function(t){return void 0!==HASH[t]},setLocationItem:function(t,e,s){2<arguments.length&&void 0!==s&&s&&(e.id="ยง"+e.id),t.prop("title","".concat(e.id,". ").concat(e.title)),t.find(".accent").html(e.id),t.find(".title").html(e.title)},setupButtons:function(t){t?this.$goButtons.prop("href",t):this.$goButtons.removeAttr("href")},enterPress:function(){r.state==i?this.$goButtons[0].click():this._enterPressed=!0}},t={$input:null,timer:null,typeTimeout:150,init:function(){var t=this;this.$input=$("#search-input"),this.$input.on("input",function(){t.input()}),this.$input.on("keydown",function(t){13==t.keyCode&&e.enterPress()})},getValue:function(){return this.$input.val().trim()},input:function(){var t=this;e._enterPressed=!1,e.abort(),clearTimeout(this.timer),0!=this.getValue().length?this.timer=setTimeout(function(){t.handleInput()},this.typeTimeout):r.setState(n)},handleInput:function(){var t=this.getValue();/^\d+$/i.test(t)&&1<=(t=parseInt(t))&&t<=4462?e.loadTask(t):r.setState(a)}};r.init(),e.init(),t.init()});