## Лемма

У любой точки $x_0 \in \R$ всегда найдется проколотая окрестность $\mathring{U}(x_0)$, в которой не найдется дробей с знаменателем меньшим или равным произвольно заданному $n_0 \in \N$.

---

Зафиксируем произвольные $x_0$ и $n_0$. Разберем два возможных варианта:

1. $x_0$ можно представить в виде дроби с каким-то целым числителем и знаменателем $n_0$
2. $x_0$ нельзя представить в этом виде

$$ x_0 \neq \frac{m}{n_0} \quad \text{ или } \quad x_0 = \frac{m}{n_0} $$

Докажем справедливость леммы в обеих вариантах.

**$x_0$ нельзя представить в виде дроби**

Тот факт, что $x_0$ нельзя представить в виде дроби $\frac{m}{n_0}$ означает, что произведение $x_0 \cdot n_0$ не равняется какому-то целому числу. То есть, число $x_0 \cdot n_0$ нецелое.

Мы можем "зажать" это нецелое число $x_0 \cdot n_0$ между его округлениями снизу и сверху, то есть между какими-то соседними целыми $m_0$ и $m_0 + 1$, чтобы выполнялось неравенство:

$$ m_0 < x_0 \cdot n_0 < m_0 + 1 $$

Поделим все части неравенства на натуральное $n_0$:

$$ \frac{m_0}{n_0} < x_0 < \frac{m_0 + 1}{n_0} $$

Получили отрезок вещественной прямой, длина которого равна $\dfrac{1}{n_0}$:

$$ x_0 \in \left[ \frac{m_0}{n_0}, \frac{m_0 + 1}{n_0} \right] $$

![Пример полученного отрезка]([[ assets ]]/segment.svg){: .w8 }

Докажем теперь два ключевых утверждения:

1. В этом отрезке не может быть дробей вида $\dfrac{m}{n_0}$ (кроме его концов).

||| spoiler Доказательство

На самом деле очевидно, что отрезок состоит из чисел между соседними дробями $\frac{m_0}{n_0}$ и $\frac{m_0 + 1}{n_0}$ и между ними не может быть еще одной дроби с таким же знаменателем (и целым числителем).

Если формально, предположим, что в этом отрезке все же присутствует некая дробь $\frac{m'}{n_0}$. Но тогда:

$$ \frac{m_0}{n_0} < \frac{m'}{n_0} < \frac{m_0 + 1}{n_0} $$

$$ 0 < \frac{m' - m_0}{n_0} < \frac{1}{n_0} $$

$$ 0 < m' - m_0 < 1 $$

Получается, что из разности двух целых чисел $m'$ и $m_0$ мы получили нецелое число. Противоречие.
Значит, дробь $\frac{m'}{n_0}$ не принадлежит рассматриваемому отрезку.

$\blacksquare$

|||

2. В этом отрезке не может быть больше одной дроби на каждый знаменатель, меньший $n_0$. Другими словами, в отрезке находится ограниченное количество дробей с знаменателем, меньшим $n_0$.

||| spoiler Доказательство

Пусть в нашем отрезке имеется вот такая дробь:

$$ \frac{m'}{n'} \quad (n' < n_0) $$

Если она одна, то проблем нет. Предположим, в этом отрезке есть еще какая-нибудь дробь с таким же знаменателем:

$$ \frac{m''}{n'} = \frac{m' + p}{n'} \quad (p\in\Z\setminus\set{0}) $$

Найдем расстояние между двумя этими дробями:

$$ \left|\frac{m' + p}{n'} - \frac{m'}{n'}\right| = |p|\frac{1}{n'} $$

Но ведь у нас $n' < n_0$, поэтому можно провести следующие преобразования:

$$ n' < n_0 \\[10px] \frac{1}{n'} > \frac{1}{n_0} $$

$$ |p|\frac{1}{n'} > \frac{1}{n'} > \frac{1}{n_0} $$

$$ |p|\frac{1}{n'} > \frac{1}{n_0} $$

Получается, расстояние между двумя дробями в нашем отрезке больше, чем длина самого этого отрезка! Противоречие.
Значит, в отрезке не может быть больше одной дроби с знаменателем $n'$.

Подобные рассуждения можно провести для любого знаменателя, меньшего $n_0$. Но таких знаменателей всего $n_0 - 1$ штук (от $n_0$ до $1$)! Значит, в отрезке может быть не больше $n_0 - 1$ дробей с меньшим знаменателем!

$\blacksquare$

|||

Обозначим ближайшую *слева* к $x_0$ дробь с меньшим знаменателем за $r_1$. Если слева от $x_0$ таких дробей не оказалось, то за $r_1$ принимаем левую границу отрезка. Аналогично, за $r_2$ обозначаем ближайшую *справа* к $x_0$ дробь с меньшим знаменателем (или правую границу отрезка).

Тогда мы можем ввести окрестность $U(x_0)$ точки $x_0$:

$$ U(x_0) = (r_1, r_2) $$

![Пример окрестности 1]([[ assets ]]/interval-not-frac.svg){: .w6 }

В этой окрестности нет дробей с знаменателем, который меньше или равен $n_0$.

$\blacksquare$

**$x_0$ можно представить в виде дроби**

Если

$$ x_0 = \frac{m}{n_0} $$

То рассмотрим два отрезка, между которые разделены точкой $x_0$:

$$ \left[ \frac{m-1}{n_0}, \frac{m}{n_0} \right] \quad \text{ и } \quad \left[ \frac{m}{n_0} , \frac{m+1}{n_0} \right] $$

Пользуясь доказанными выше утверждениями, в первом и втором отрезках находится ограниченное количество дробей с знаменателем, меньшим $n_0$.

Обозначим за $r_1$ самую правую такую дробь из первого отрезка (или его левую границу, если таких дробей нет). За $r_2$ обозначим самую левую дробь из второго отрезка (или его правую границу).

Тогда мы можем ввести окрестность $U(x_0)$ точки $x_0$:

$$ U(x_0) = (r_1, r_2) $$

Так как сама точка входит в эту окрестность, для выполнения условий леммы мы обязаны исключить ее из этой окрестности. Получаем проколотую окрестность:

$$ \mathring{U}(x_0) = (r_1, r_2) \setminus \set{x_0} $$

![Пример окрестности 2]([[ assets ]]/interval-frac.svg){: .w6 }

В этой проколотой окрестности нет дробей с знаменателем, который меньше или равен $n_0$.

$\blacksquare$

## Решение задачи

В каждой точке $x$ вещественной прямой функция $f(x)$ конечна, так как по определению она в этой точке равна либо $0$, либо какому-то рациональному числу.

Зафиксируем произвольную точку $x_0$ и произвольную ее окрестность $V(x_0)$.

Предположим, что функция $f(x)$ ограничена в окрестности $V(x_0)$. Значит существует граница $M>0$. По принципу Архимеда мы можем найти натуральное число $n_1 \geq M$.

Тогда, согласно доказанной выше лемме, существует проколотая окрестность $\mathring{U}_1(x_0)$, в которой **нет** дробей (в том числе и несократимых) с знаменателем, меньшим или равным $n_1$. Введем обозначение

$$ T_1 = V(x_0) \cap \mathring{U}_1(x_0) $$

$T_1$ является пролотой окрестностью точки $x_0$, целиком содержится в $V(x_0)$ и в ней нет дробей с знаменателем, меньшим или равным $n_1$. Но рациональные числа в $T_1$ все же есть (исходя из непрерывности множества $\R$). Возьмем какое-нибудь их них. Оно имеет вид несократимой дроби $ \dfrac{m}{n_2} $ ($m$ и $n_2$ взаимно простые), причем $n_2 > n_1$.

Мы можем повторить эти рассуждения уже для $n_2$ и получить $\mathring{U}_2(x_0)$, а затем и $T_2$, в котором найдется $n_3 > n_2$.

Таким образом, внутри $V(x_0)$ мы построили последовательность дробей:

$$ \frac{m_1}{n_1}, \frac{m_2}{n_2}, \ldots, \frac{m_i}{n_i}, \ldots $$

Причем знаменатели представляют собой бесконечно возрастающую подпоследовательность натуральных чисел:

$$ n_1 < n_2 < \ldots < n_i < \ldots $$

Но по определению значения функции $f(x)$ для этих дробей как раз и равны их знаменателям, а значит значения функции тоже являются возрастающей подпоследовательностью натуральных чисел, которая превысит любую наперед заданную границу.

Значит, функция $f(x)$ является неограниченной в окрестности $V(x_0)$ точки $x_0$, а значит и в любой окрестности любой точки вещественной прямой.

$\blacksquare$