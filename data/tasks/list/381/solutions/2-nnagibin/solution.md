## Лемма 1

На любом отрезке вида $\left[ a, a+\frac{1}{2^n} \right]$ найдется хотя бы одна (возможно, сократимая) дробь со знаменателем $2^n$.

||| spoiler Доказательство

Пусть $ x = \floor{a\cdot 2^n} $. Тогда

$$ x \leq a\cdot 2^n \leq x+1 $$

Прибавим ко всем частям неравенства единицу и объединим с предыдущим неравенством:

$$ x \leq a\cdot 2^n \leq x + 1 \leq a\cdot 2^n + 1 \leq x+2 $$

$$ a\cdot 2^n \leq x+1 \leq a\cdot 2^n + 1 $$

Разделим все части неравенства на $2^n$:

$$ a \leq \frac{x+1}{2^n} \leq a + \frac{1}{2^n} $$

Отсюда дробь в центре и является искомой дробью, которая удовлетворяет условию леммы.

$\blacksquare$

|||

## Лемма 2

На любом интервале длины $\frac{1}{2^n}$ найдется нескоратимая дробь с знаменателем $2^{n+2}$.

||| spoiler Доказательство

Зафиксируем произвольный интервал вещественной прямой $I$ с длиной $\dfrac{1}{2^n}$. 

Выделим на этом интервале $I$ два последовательных "прижатых друг к другу" отрезка $A$ и $A'$ с одинаковыми длинами, равными $\dfrac{1}{2^{n+2}}$.

$$ A = \left[a, a+\frac{1}{2^{n+2}}\right] \qquad A' = \left[ a + \frac{1}{2^{n+2}}, a+\frac{1}{2^{n+1}} \right] $$

Они оба поместятся в $I$, так как их суммарная длина меньше длины интервала $I$.

В первом отрезоке $A$, по **лемме 1**, найдется дробь вида:

$$ d = \frac{m}{2^{n+2}} \in A $$

$$ a \leq \frac{m}{2^{n+2}} \leq a + \frac{1}{2^{n+2}} $$

Рассмотрим соседнюю к $d$ дробь, прибавив ко всем частям неравенства $\dfrac{1}{2^{n+2}}$:

$$ a + \frac{1}{2^{n+2}} \leq d' = \frac{m+1}{2^{n+2}} \leq a + \frac{1}{2^{n+1}} $$

Исходя из этого неравенства получаем, что $d' \in A'$.

Итак, у нас в отрезках $A$ и $A'$ есть две соседние дроби:

$$ \frac{m}{2^{n+2}} \qquad \frac{m+1}{2^{n+2}} $$

У одной из двух этих дробей числитель обязательно будет нечетным, а значит какая-то из них точно несократимая.

$\blacksquare$

|||

## Лемма 3

Внутри любого промежутка с длиной $\varepsilon$ можно выделить интервал длины $\dfrac{1}{2^n}$ при $n \geq n_0$.

||| spoiler Доказательство

Найдем такое $n_0$. Для этого рассмотрим неравенство:

$$ \frac{1}{2^{n_0}} < \varepsilon \\[5px] \frac{1}{\varepsilon} < 2^{n_0} $$

Прологарифмируем обе части по основанию $2$:

$$ \log_2\frac{1}{\varepsilon} < n_0 $$

Итак достаточно найти натуральное $n_0$, которое удовлетворяет неравенству выше (а оно найдется по принципу Архимеда) и тогда для любого $n \geq n_0$, в промежутке с длиной $\varepsilon$ можно выделить интервалы с длиной $\dfrac{1}{2^n}$.

$\blacksquare$

|||

## Решение

Нам нужно доказать, что функция $f(x)$ неограничена в любой своей окрестности. Предположим противное. Пусть существует $\varepsilon$-окрестность $f(x)$, в которой она ограничена некоторым числом $M>0$. Тогда, по **лемме 3** в этой окрестности найдется $n_0$.

Возьмем $N = \max(n_0, M)$. Тогда, в $\varepsilon$-окрестности найдется интервал с длиной $\dfrac{1}{2^N}$. По **лемме 2**, в этом интервале найдется несократимая дробь $\dfrac{m}{2^{N+2}}$.

Но

$$ f\left( \frac{m}{2^{N+2}} \right) = 2^{N+2} > N+2 > M $$

Получили противоречие. Значит, функция $f(x)$ есть неограниченная на всей вещественной прямой.

$\blacksquare$