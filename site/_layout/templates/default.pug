include /includes/mixins

mixin altMenuItem(name, link, icon, label, hint)
    a.listItem(class=name, href=link, title=hint)
        i(class=icon)
        span=label

doctype html
include /includes/art.html
html(lang="ru")
    head
        meta(charset="UTF-8")
        meta(name="viewport", content="width=device-width, initial-scale=1")

        title= seo.getFullTitle()
        meta(name="description", content=seo.desc)

        link(rel="canonical" href=canonical())

        meta(name="keywords", content=seo.getKeywords().join(', '))

        if (seo.img)
            meta(name="og:image", content=seo.img)

        meta(name="generator", content="DODEM Static Site Generator")
        meta(name="build-time", content=config.buildTime)

        //- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ–º—ã
        meta(name="color-scheme", content="")
        meta(name="theme-color", content="")

        //- –ò–∫–æ–Ω–∫–∏ —Å–∞–π—Ç–∞
        link(rel="icon", href="/site/graphics/favicon/favicon.svg")
        link(rel="icon", type="image/png", href="/site/graphics/favicon/favicon.png")

        //- Font Awesome
        link(href="/site/vendor/font-awesome/css/all.min.css", rel="stylesheet")

        //- KaTeX
        link(href="/site/vendor/katex/katex.min.css", rel="stylesheet")

        //- –ë–∞–∑–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å—Ç–∏–ª–µ–π
        link(href="/site/styles/global.css", rel="stylesheet")

        block vendorCSS
        block vendor

        if (hasStyle)
            link(href=`/site/styles/${pageName}.css`, rel="stylesheet")

        block styles
        
        block head

        //- –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è Yandex
        meta(name="yandex-verification", content="7ff246512ec9d0f4")

        //- Yandex.RTB
        script.
            window.yaContextCb=window.yaContextCb||[]
        script(src="https://yandex.ru/ads/system/context.js", async)

    body(class=bodyClass())
        include /includes/theme

        .bg
            .formulas
            .fog

        .site
            header
                .artLine
                .headerContent
                    a.logo(href="/")
                        .logo-figure
                            include /includes/logo.svg
                        .logo-title –î–µ–º–∏–¥–æ–≤–∏—á

                    nav
                        a(href="/tasks").nav-item.tasks
                            i.fas.fa-hashtag
                            span –ó–∞–¥–∞—á–∏

                        a(href="/book").nav-item.book
                            i.fas.fa-book
                            span –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫

                        a.nav-item.search
                            i.fas.fa-search
                            span –ü–æ–∏—Å–∫

                        .nav-item.altMenuContainer
                            i.fas.fa-bars
                            span –ú–µ–Ω—é

                            .altMenu
                                .list
                                    +altMenuItem("donate", "/donaters", "fas fa-hand-holding-usd", "–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å")
                                    +altMenuItem("history", "/history", "fas fa-history", "–•—Ä–æ–Ω–æ–ª–æ–≥–∏—è")
                                    +altMenuItem("solvers", "/solvers", "fas fa-users", "–†–µ—à–∞—Ç–µ–ª–∏")
                                    +altMenuItem("problems", "/problems", "fas fa-bug", "–ü—Ä–æ–±–ª–µ–º—ã")

                                .sep
                                
                                .iconList
                                    a.themeSwitcher(onclick="toggleTheme()", title="–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤–æ–π —Å—Ö–µ–º—ã —Å–∞–π—Ç–∞")
                                        i.fas.fa-sun.light
                                        i.fas.fa-moon.dark

                                    a(href="https://bydef.ru", title="–§–æ—Ä—É–º", target="_blank")
                                        i.fas.fa-comments

                                    a(href="https://github.com/CMTV/dodem", title="–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —Å–∞–π—Ç–∞", target="_blank")
                                        i.fas.fa-code

                                //- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∫–ª–∏–∫–∞ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –º–µ–Ω—é –Ω–∞ —Å–µ–Ω—Å–æ—Ä–Ω—ã—Ö —ç–∫—Ä–∞–Ω–∞—Ö
                                .clickPreventer(tabindex="0")
                
                include /includes/search


            main
                .omath
                    header
                        img(src="/site/graphics/omath.svg")
                        .info
                            p –û—Ç–∫—Ä–æ–π—Ç–µ <strong>"–û—Ç–∫—Ä—ã—Ç—É—é –ú–∞—Ç–µ–º–∞—Ç–∏–∫—É"!</strong>
                            p –ü–æ–Ω—è—Ç–Ω–∞—è —Ç–µ–æ—Ä–∏—è, –∫–æ–Ω—Å–ø–µ–∫—Ç—ã –∏ –∑–∞–¥–∞—á–Ω–∏–∫ –≤ –æ–¥–Ω–æ–º —Ñ–ª–∞–∫–æ–Ω–µ!
                        a.goto(href="https://omath.ru")
                            span –ó–∞–≥–ª—è–Ω—É—Ç—å
                            img(src="/site/graphics/arrow-right.svg")
                    .topics

                    script.
                        let topics = [
                            ['–°–æ—á–µ—Ç–∞–Ω–∏—è',           'https://omath.ru/article/combinatorics/combination'],
                            ['–ü–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∏',        'https://omath.ru/article/combinatorics/permutation'],
                            ['–†–∞–∑–º–µ—â–µ–Ω–∏—è',          'https://omath.ru/article/combinatorics/arrangement'],
                            ['–§–∞–∫—Ç–æ—Ä–∏–∞–ª',           'https://omath.ru/article/combinatorics/factorial'],
                            ['–ü—Ä–∞–≤–∏–ª–æ —É–º–Ω–æ–∂–µ–Ω–∏—è',   'https://omath.ru/article/combinatorics/rules/product'],
                            ['–ü—Ä–∞–≤–∏–ª–æ —Å–ª–æ–∂–µ–Ω–∏—è',    'https://omath.ru/article/combinatorics/rules/sum'],
                            ['–ü—Ä—è–º–æ–π –ø–µ—Ä–µ–±–æ—Ä',      'https://omath.ru/article/combinatorics/brute-force'],
                            ['üî• –ë–∏–Ω–æ–º –ù—å—é—Ç–æ–Ω–∞',    'https://omath.ru/article/combinatorics/binomial-theorem'],
                            ['–ö–æ–º–±–∏–Ω–∞—Ç–æ—Ä–∏–∫–∞',       'https://omath.ru/article/combinatorics/preface'],
                        ]

                        function shuffleArray(array) {
                            for (var i = array.length - 1; i > 0; i--) {
                                var j = Math.floor(Math.random() * (i + 1));
                                var temp = array[i];
                                array[i] = array[j];
                                array[j] = temp;
                            }
                        }

                        shuffleArray(topics);

                        let container = document.querySelector('.omath .topics');
                        topics.slice(0, 5).forEach(topicArr =>
                        {
                            let a = document.createElement('a');
                                a.classList.add('topic');
                                a.setAttribute('href', topicArr[1]);
                                a.innerText = topicArr[0];
                            
                            container.appendChild(a);
                        });

                    a.seeAll(href="https://omath.ru") –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Ç–µ–º—ã!

                if (location.hasLocation())
                    include /includes/location

                block body

            footer
                .quote
                    blockquote –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –¥–ª—è —É—á–µ–Ω–æ–≥–æ - —Ç–æ –∂–µ —Å–∞–º–æ–µ, —á—Ç–æ —Å–∫–∞–ª—å–ø–µ–ª—å –¥–ª—è –∞–Ω–∞—Ç–æ–º–∞.
                    a(target="_blank").by –ù–∏–ª—å—Å –ê–±–µ–ª—å

        block vendorJS

        //- –ë–∞–∑–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã —Å–∞–π—Ç–∞
        script(src="/site/scripts/global.js")

        if (hasScript)
            script(src=`/site/scripts/${pageName}.js`)

        block scripts

        //-
        //-
        //-

        //- Yandex —Å—á–µ—Ç—á–∏–∫
        include /includes/vendor/yandex.html

        //- Google
        include /includes/vendor/google.html